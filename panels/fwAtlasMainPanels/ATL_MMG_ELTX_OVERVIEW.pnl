V 14
1
LANG:10001 0 
PANEL,-1 -1 859 866 N "FwAtlasBg" 0
"main()
{
  mmgGeneral_drawChambers_Side(200,220,1.0,\"A\");
  mmgGeneral_drawChambers_Side(200,590,1.0,\"C\");
}" 0
 E E E E 1 -1 -1 0  117 143
""0  1
E "#uses \"mmg_eltx_lib/mmgEltx.ctl\"

void mmgGeneral_drawChambers_Side(int x_center, int y_center,float sc,string side)
{
  float x ,y, phi, phiRad, scale, a, b, c1,c2, d1,d2, x_circle, y_circle;
  string channel;
  dyn_string sector = makeDynString(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\");

  scale = sc*12.20; //since 610.1 = 5 pvss squares
  b =  610.1/scale;//50;
  c1 =  1170.9/scale;//130;
  c2 = 753.5/scale;
  d1 =  1149.6/scale;//110;
  d2 = 1197.3/scale;
  a = 74/sc;//8*(b+402.9/scale)/6.28;//74; //127.5; //100;//2000/scale;

  phi=22.5;

  string sectorObj;

    //create the large chambers
    for (int n=1; n<=16; n++)
    {
      if (n%2!=0) {  //take the odd numbers
        phi = (n-1)*22.5;
        phiRad = deg2rad(phi);
        x = x_center - (a+d1)*cos(phiRad) - c1/2.*sin(phiRad);
        y = y_center - (a+d1)*sin(phiRad) + c1/2.*cos(phiRad);
        x_circle = x_center - (a+d1/2)*cos(phiRad)-10/sc;
        y_circle  = y_center - (a+d1/2)*sin(phiRad)-10/sc;

        sectorObj=getDetector()+\"_SIDE_\"+side+\"_SECTOR_\"+sector[n];
        addSymbol(myModuleName(),myPanelName(),\"/objects/LargeChamber.pnl\",\"\",makeDynString(\"$domain:\"+sectorObj,\"$obj:\"+sectorObj), x, y, 90.-phi, 1/sc, 1/sc);

          }
    }


    //create the small chamners
    for (int n=1; n<=16; n++)
    {
      if (n%2==0) {
        phi = (n-2)*22.5+22.5;
        phiRad = deg2rad(phi);
        x = x_center - (a+d2)*cos(phiRad) - c2/2.*sin(phiRad);
        y = y_center - (a+d2)*sin(phiRad) + c2/2.*cos(phiRad);
        x_circle = x_center - (a+d2/2)*cos(phiRad)-10/sc;
        y_circle  = y_center - (a+d2/2)*sin(phiRad)-10/sc;

        sectorObj=getDetector()+\"_SIDE_\"+side+\"_SECTOR_\"+sector[n];
        addSymbol(myModuleName(),myPanelName(),\"/objects/SmallChamber.pnl\",\"\",makeDynString(\"$domain:\"+sectorObj,\"$obj:\"+sectorObj), x, y, 90.-phi, 1/sc, 1/sc);

        }
      }

   addSymbol(myModuleName(),myPanelName(),\"/objects/chamberNumber.pnl\",\"\",makeDynString(\"$number:1\"), x_center-60/sc, y_center, 0, 1/sc, 1/sc);
   addSymbol(myModuleName(),myPanelName(),\"/objects/chamberNumber.pnl\",\"\",makeDynString(\"$number:5\"), x_center, y_center-65/sc, 0, 1/sc, 1/sc);
   addSymbol(myModuleName(),myPanelName(),\"/objects/chamberNumber.pnl\",\"\",makeDynString(\"$number:9\"), x_center+60/sc, y_center, 0, 1/sc, 1/sc);
   addSymbol(myModuleName(),myPanelName(),\"/objects/chamberNumber.pnl\",\"\",makeDynString(\"$number:13\"), x_center, y_center+55/sc, 0, 1/sc, 1/sc);

}" 0
 3
"CBRef" "1"
"EClose" E
"dpi" "96"
0 0 0
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
1
LANG:10001 0 
6 5
"RECTANGLE7"
""
1 97 155 E E E 1 E 1 E N "_Transparent" E N "FwAtlasBg" E E
 E E
5 0 0 0 0 0
E E E
0
2
LANG:10001 0 
LANG:1 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 2 1 E 1.038081395348837 0 0.6904761904761904 -0.6938953488372022 -2.02380952380949 4 "[linear,reflect,0.458,1.45,0.47,-0.482,0.0201,{0,0,0},0.453,{255,255,255}]" E -1 -1 859 41
2 6
"PRIMITIVE_TEXT20"
""
1 805 0 E E E 1 E 1 E N "FwAtlasBg" E N "_Transparent" E E
 E E
6 0 0 0 0 0
E E E
0
2
LANG:10001 0 
LANG:1 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"main()
{
  this.text(getDetector());

}" 0
 E 0 1 1 2 1 E U  0 E 805 0 870 31
0 2 2 "0s" 0 0 0 64 0 0  805 0 1
2
LANG:10001 32 Utopia,-1,19,5,75,0,0,0,0,0,Bold
LANG:1 31 Sans Serif,-1,27,5,75,0,0,0,0,0
0 2
LANG:10001 3 DEC
LANG:1 4 ATCA
2 7
"PRIMITIVE_TEXT17"
""
1 8 -5 E E E 1 E 1 E N "FwAtlasBg" E N "_Transparent" E E
 E E
7 0 0 0 0 0
E E E
0
2
LANG:10001 0 
LANG:1 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 2 1 E U  0 E 8 -5 803 26
0 2 2 "0s" 0 0 0 64 0 0  8 -5 1
2
LANG:10001 32 Utopia,-1,27,5,75,0,0,0,0,0,Bold
LANG:1 31 Sans Serif,-1,27,5,75,0,0,0,0,0
0 2
LANG:10001 32 Micromegas Chamber - Electronics
LANG:1 4 ATCA
30 9
"FRAME1"
""
1 50 62 E E E 1 E 1 E N "White" E N {0,0,0} E E
 E E
9 0 0 0 0 0
E E E
1
1
LANG:10001 0 

3
"layoutAlignment" "AlignNone"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 2 1 E 1.147826086956522 0 5.338235294117648 -48.39130434782585 -296.9705882352941 0 E 50 62 741 131
1
LANG:10001 32 Utopia,-1,13,5,75,0,0,0,0,0,Bold
0 1
LANG:10001 8 EndCap A
30 10
"FRAME2"
""
1 50 62 E E E 1 E 1 E N "White" E N {0,0,0} E E
 E E
10 0 0 0 0 0
E E E
1
1
LANG:10001 0 

3
"layoutAlignment" "AlignNone"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 2 1 E 1.147826086956522 0 5.338235294117648 -48.39130434782553 74.02941176470591 0 E 50 62 741 131
1
LANG:10001 32 Utopia,-1,13,5,75,0,0,0,0,0,Bold
0 1
LANG:10001 8 EndCap C
0
LAYER, 1 
1
LANG:10001 0 
0
LAYER, 2 
1
LANG:10001 0 
0
LAYER, 3 
1
LANG:10001 0 
0
LAYER, 4 
1
LANG:10001 0 
0
LAYER, 5 
1
LANG:10001 0 
0
LAYER, 6 
1
LANG:10001 0 
0
LAYER, 7 
1
LANG:10001 0 
0
0
